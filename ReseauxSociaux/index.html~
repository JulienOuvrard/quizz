<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Réseaux sociaux et graphes -  Colin de la Higuera - 10/10/2013</title>
        <link href="./main.css" rel="stylesheet" type="text/css">
        <link href="./hopscotch.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="libs/jquery-ui.css">
        <link rel="stylesheet" href="libs/jquery.splitter.css">
  </head>

    <body>
      <header>
        <div class="leftheader">
        <a title="COCo website" href="http://comin-ocw.org/"><img alt="COCoNotes" class="cocoicon" src="http://comin-ocw.org/img/logo_coconotes.svg" width="120" height="20" /></a>
        <a class="indexlink" href="//comin-ocw.org/contents/">Liste des vidéos</a>
        </div>
        <section class="infobox">
          <div id="help_message" class="popup_message" title="Aide et crédits">
            <div>
              <p>Cette plateforme est un travail en cours du <a title="Projet COCo - CominOpenCourseware" href="http://comin-ocw.org/">projet COCo</a>. Consultez notre site web pour plus de détails.</p>
              <p>Quelques conseils :</p>
              <ul>
                <li>Le lecteur vidéo peut être contrôlé avec le clavier: Contrôle-espace pour jouer/mettre en pause, Contrôle-flèche à gauche et Contrôle-flèche à droite pour se déplacer dans la vidéo.</li>
                <li>Si vous mettez la vidéo en pause, l'URL de la page sera mise à jour pour correspondre à votre position actuelle (en utilisant la syntaxe <a href="http://www.w3.org/TR/media-frags/‎">MediaFragment</a>). Vous pouvez alors la copier en signet, l'échanger par mail...</li>

                <li>Vous pouvez passer la vidéo en plein écran en double-cliquant dessus.</li>
                <li>Vous pouvez chercher des termes dans les annotations via le champ de recherche.</li>
              </ul>
            </div>
          </div>
          <div id="credits_message" class="popup_message" title="Crédits">
            <div>
              <p>L'interface est basée sur <a href="https://github.com/IRI-Research/metadataplayer">MetaDataPlayer</a> (licence CeCILL-C) réalisé par l'<a href="http://www.iri.centrepompidou.fr/">Institut de Recherche et d'Innovation</a>. Elle utilise également la <a href="https://github.com/linkedin/hopscotch">librairie Hopscotch</a> (licence Apache 2.0) et <a href="https://github.com/jquery/jquery/">jQuery</a> (<a href="https://github.com/jquery/jquery/blob/master/LICENSE.txt">licence</a>), ainsi que des icônes <a href="http://www.famfamfam.com/lab/icons/silk/">FAMFAMFAM</a>.</p>
              <p>Le projet COCo est financé conjointement par une aide du gouvernement français accordée au <a class="sponsor" title="gérée par l'ANR dans le programme 'Investissements du futur' sous la référence ANR-JO-LABX-07-0J" href="http://www.cominlabs.ueb.eu/">labex COMIN Labs</a>, et la <a class="sponsor" title="Région Pays de la Loire" href="http://www.paysdelaloire.fr/" target="_blank">Région Pays de Loire</a>. Il est hébergé par l'<a class="sponsor" title="Université de Nantes" href="http://www.univ-nantes.fr/" target="_blank">Université de Nantes</a> et le <a class="sponsor" title="LINA" href="http://www.lina.univ-nantes.fr/" target="_blank">laboratoire LINA</a>.
            </div>
          </div>
        </section>

        <div class="rightside menu">
          <div class="username">
            <input id="username" size="10" title="Cliquez ici et indiquez votre nom" onclick="this.select();" type="text" value="Anonyme"></input><img alt="" src="../../../img/user.svg" width="13px" height="13px">
          </div>
          <ul id="right_menu">
            <li id="help_menu"><a>?</a>
              <ul id="help_submenu">
                <li><a class="TraceMe" id="take_the_tour">Visite guidée</a></li>
                <li><a class="TraceMe popup_action" id="help">Utilisation</a></li>
                <li><a class="TraceMe popup_action" id="credits">Crédits</a></li>
              </ul>
            </li>
          </ul>
        </div>

      </header>

      <section id="content">
        <section class="column playercolumn">
          <h1 class="coconotes"><span title="Réseaux sociaux et graphes" class="meta-title">Réseaux sociaux et graphes</span> - <span class="meta-author"> Colin de la Higuera</span></h1>
          <div id="LdtPlayer"></div>
        </section>

        <section class="column tabcolumn">
          <div id="tab">
            <ul id="tab_labels">
              <li><a title="Diapositives" id="tab_label_slides" href="#tab-slides">Diapos</a></li>
              <li><a title="Plan des diapositives" id="tab_label_toc" href="#tab-toc">Plan diapos</a></li>
              <li><a title="Questions" id="tab_quizz_toc" href="#tab-quizz">Liste quizz</a></li>
              <li><a title="Édition de quizz" id="tab_label_quizz_creation" href="#tab-quizz-edit">Édition Quizz</a></li>
              <li><a title="Notes personnelles" id="tab_label_contributions" href="#tab-contributions">Notes</a></li>
              <li><a title="À propos de cette vidéo" id="tab_label_about" href="#tab-about">About</a></li>
            </ul>
            <div id="tab_content">
              <div id="tab-slides" class="tab-content">
                <div id="SlidesContainer"></div>
              </div>
              <div id="tab-toc" class="tab-content">
                <div id="TocContainer"></div>
              </div>
              <div id="tab-quizz" class="tab-content">
                <div id="QuizzListContainer"></div>
              </div>
              <div id="tab-quizz-edit" class="tab-content">
                <div id="QuizzEditContainer"></div>
              </div>
              <div id="tab-contributions" class="tab-content">
                <div class="tab_content_header" id="ContributionsNotes">Créez vos notes via la zone de saisie sous la vidéo. </div>
                <div id="ContributionsContainer"></div>
              </div>
                            <div id="tab-about" class="tab-content">
                <div id="AboutContainer">
                  <h3><em>Réseaux sociaux et graphes</em> par  Colin de la Higuera</h3>
                  <p class="about-license">
                    Licence: <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></span> <a title="Réseaux sociaux et graphes de  Colin de la Higuera is licensed under a Creative Commons Attribution 4.0 International License" rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img class="licenseicon" alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
                  </p>
                  <p>Télécharger les <a download href="slides.pdf">diapositives</a></p>
                  <p>Télécharger la <a download href="camera.mp4">vidéo</a></p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </section>

      <footer>
        <div class="license">
          <span class="licensetext"><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/MovingImage" property="dct:title" rel="dct:type">Réseaux sociaux et graphes</span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName"> Colin de la Higuera</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></span>
          <a title="Réseaux sociaux et graphes de  Colin de la Higuera is licensed under a Creative Commons Attribution 4.0 International License" rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img class="licenseicon" alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
        </div>
      </footer>
<script type="text/javascript" src="libs/jquery.min.js"></script>
<script type="text/javascript" src="libs/jquery-ui.min.js"></script>
<script type="text/javascript" src="libs/jquery.splitter.js"></script>
<script type="text/javascript" src="libs/jquery.ui.touch-punch.min.js"></script>
<script type="text/javascript" src="metadataplayer/LdtPlayer-core.js"></script>
<script type="text/javascript" src="libs/hopscotch.min.js"></script>
<script type="text/javascript">
            IriSP.libFiles.defaultDir = "libs/";
IriSP.widgetsDir = "widgets";
IriSP.language = "fr";
var username = "";
var _metadata = {
    url: "data.json",
    format: 'ldt'
};
var local_id = 'annotations-' + document.location.pathname.split('/').reverse()[1];
var _config = {
    width : '100%',
    container : 'LdtPlayer',
    default_options: {
        metadata: _metadata
    },
    css : 'metadataplayer/LdtPlayer-core.css',
    widgets: [
          {
              type: "SlideVideoPlayer",
              video: "http://comin-ocw.org/media/infol1/20131010-camera-reference.mp4",
              width: '100%',
              url_transform: function(n) {
                  var elements = /(.+)\.(\w\w\w)$/.exec(n);
                  var videoname = null;
                  var v = document.createElement("video");
                  if (v && v.canPlayType && v.canPlayType("video/mp4")) {
                      videoname = elements[1] + ".mp4";
                  } else {
                      videoname = elements[1] + ".ogv";
                  }
                  return videoname;
              }
          },
          { type: "Trace",
            url: "http://comin-ocw.org/trace/",
            requestmode: "GET",
            default_subject: "comin"
          },
          { type: "Mediafragment"},
          { type: "Shortcuts"},
          { type: "Slider" },
          { type: "Controller",
            disable_annotate_btn: true,
            always_show_search: true,
            create_quizz_callback: function () {
				console.log("Quizz callback");
                $("#QuizzEditContainer").show();
                _tabs.tabs("option", "active", get_tab_index('#tab-quizz-edit'));
            },
            enable_quizz_toggle: true
          },
          { type: "CreateAnnotation",
            annotation_type: "Contributions",
            minimize_annotation_widget : true,
            pause_on_write: false,
            after_send_timeout: 1500,
            start_visible : true,
            always_visible: true,
            show_slice: false,
            show_arrow: false,
            show_controls: true,
            show_creator_field: false,
            show_title_field: false,
            editable_storage: local_id,
            api_endpoint_template: 'http://comin-ocw.org/pf/api/annotation',
            polemics: [] },
          { type: "MultiSegments",
            annotation_start_minimized: false,
            annotation_show_creator: false,
            segments_show_creator: false,
            show_all: true },
          {
              type: "AnnotationsList",
              container: "SlidesContainer",
              annotation_type: "Slides",
              limit_count: 120,
              show_audio: false,
              show_end_time: false,
              show_controls: false,
              polemics: []
          },
          {
              type: "AnnotationsList",
              container: "TocContainer",
              annotation_type: "Slides",
              limit_count: 120,
              show_audio: false,
              show_end_time: false,
              show_controls: false,
              polemics: []
          }, //
          {
              type: "AnnotationsList",
              container: "ContributionsContainer",
              annotation_type: "Contributions",
              editable: true,
              editable_storage: local_id,
              limit_count: 240,
              show_creator: true,
              show_audio: false,
              show_end_time: false,
              show_controls: false,
              default_thumbnail: 'imagecache/contribution.svg',
              polemics: []
          },
          {
              type: "AnnotationsList",
              container: "QuizzListContainer",
              annotation_type: "Quizz",
			  editable: true,
              show_creator: true,
              show_audio: false,
              show_end_time: false,
              show_controls: false,
              default_thumbnail: 'imagecache/cdlh.svg',
			  is_quizz: true,
			  show_creator: false,
              polemics: []
          },
          { type: "QuizzCreator",
            container: "QuizzEditContainer",
            annotation_type: "Quizz",
            minimize_annotation_widget : true,
            pause_on_write: true,
            after_send_timeout: 1500,
            start_visible : true,
            always_visible: true,
            show_slice: false,
            show_arrow: false,
            show_controls: true,
            show_creator_field: false,
            show_title_field: false,
            editable_storage: local_id,
            api_endpoint_template: 'http://comin-ocw.org/pf/api/annotation',
            polemics: [] },
          {
              type: "Quizz",
              container: "",
              annotation_type: "Quizz",
              show_creator: true,
              show_audio: false,
              show_end_time: false,
              show_controls: false,
              polemics: []
          },
          {
              type: "NoteTaking",
              container: "NoteTakingContainer",
              editable_storage: "notes-" + local_id
          }
          ]
          }; //
          _myPlayer = new IriSP.Metadataplayer(_config);

        var take_the_tour = function () {
            var on_close = function () {
                $("#take_the_tour").show();
                window.localStorage['coco-toured'] = true;
            }
            // Start the tour!
            hopscotch.startTour( {
                id: "hello-coco",
                steps: [
                    {
                        title: "Bienvenue",
                        content: "Bienvenue sur ce site prototype. Il vous permettra de visionner des vidéos, de consulter des notes associées et de prendre vos propres notes.",
                        target: "header",
                        placement: "bottom"
                    },
                    {
                        title: "Saisie des notes",
                        content: "Pour saisir une note, synchronisée avec la vidéo, saisissez le texte dans cette zone et validez avec Entrée.",
                        target: ".Ldt-Widget[widget-type=CreateAnnotation]",
                        placement: "top"
                    },
                    {
                        title: "Notes - onglet",
                        content: "Vos notes personnelles seront présentées dans cette colonne à droite de la vidéo. Elles sont pour l'instant sauvegardées uniquement dans la mémoire de votre navigateur.",
                        target: "#tab",
                        placement: "left"
                    },
                    {
                        title: "Notes - publication",
                        content: "Vous pouvez choisir via un bouton apparaissant au survol de rendre une note publique. Elle sera alors visible de tous les utilisateurs dans l'onglet Notes publiques.",
                        target: "#tab",
                        placement: "left"
                    }

                  ],
                  showPrevButton: true,
                  zindex: 950,
                  showCloseButton: true,
                  onStart: function () {
                      $("#take_the_tour").hide();
                  },
                  onEnd: on_close,
                  onClose: on_close
              });
          };

            _myPlayer.on("trace-ready", function () {
                var tracer = tracemanager.get_trace("test");
                tracer.trace("PlayerStart", { url: document.URL });
                IriSP.jQuery(".TraceMe").on("mousedown mouseenter mouseleave", function(_e) {
                    tracer.trace('Mdp_' + _e.type,
                                 {
                                     "widget": "coco",
                                     "target": this.id
                                 });
                });
                document.addEventListener("visibilitychange", function() {
                    tracer.trace("VisibilityChange", {
                        "state": document.visibilityState,
                        "url": document.URL
                    });
                });

                if (! window.localStorage['coco-toured'])
                    window.setTimeout(take_the_tour, 2000);
            });
          document._myPlayer = _myPlayer;
        </script>
        <script type="text/javascript">
          var name = localStorage.getItem('mla-username') || "Anonyme";
          $("#username").val(name)
          .on("blur", function () {
              set_username($("#username").val());
          });

          function set_username(u) {
              name = u;
              localStorage.setItem('mla-username', u);
              // Find CreateAnnotation widget and update creator_name
              _myPlayer.config.username = u;
              if (_myPlayer.widgets) {
                  var wid = _myPlayer.widgets.filter(function (w) { return w.type == "CreateAnnotation"; }).map( function (w) { w.creator_name = u; });
              }
          };
          var get_tab_index = function (id) {
              var l = $("#tab > ul > li a").map(function (i, tab) { if (id == tab.getAttribute('href')) return i;})
              // Return 0 index if the id is not found
              return l[0] || 0;
          }
          var _tabs = $("#tab").tabs();
          _myPlayer.on("Annotation.create", function (a) {
              _tabs.tabs("option", "active", get_tab_index('#tab-contributions'));
          });
          _myPlayer.on("Annotation.publish", function (a) {
              _tabs.tabs("option", "active", get_tab_index('#tab-publiccontributions'));
              var wid = _myPlayer.widgets
                  .filter(function (w) { return w.type == "AnnotationsList"
                                         && w.annotation_type == "PublicContribution" })
                  .map( function (w) {
                      w.source.get();
                      w.source.onLoad( function () {
                          w.refresh();
                      });
                  });
          });
          $("#take_the_tour").click( function (e) {
              take_the_tour();
          });
            $(".popup_action").click( function (e) {
                $( "#" + this.getAttribute('id') + "_message" ).dialog({
                    modal: true,
                    minWidth: 400,
                    closeOnEscape: true,
                    buttons: {
                        Ok: function() {
                            $( this ).dialog( "close" );
                        }
                    }
                });
          });

        <!-- Piwik -->
          var _paq = _paq || [];
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (function() {
          var u="//comin-ocw.org/analytics/";
          _paq.push(['setTrackerUrl', u+'piwik.php']);
          _paq.push(['setSiteId', 1]);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
          })();
        <!-- End Piwik Code -->
          function on_resize() {
              IriSP.jQuery("[widget-type=Segments]").resize();
          }

          var splitter;
          _myPlayer.on("widgets-loaded", function () {
              set_username(name);
              splitter = $("#content").split({
                  orientation: 'vertical',
                  position: '66%',
                  limit: 100,
                  onDragEnd: function (e) {
                      on_resize();
                      return false;
                  }
              });
              window.setTimeout(function () { splitter.position('66%');
                                              on_resize(); }, 500);
          });
        </script>
    </body>
</html>

